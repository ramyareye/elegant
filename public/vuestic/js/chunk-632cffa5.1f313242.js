(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-632cffa5","chunk-9013323e","chunk-6cf7b916","chunk-2c9e12e0"],{"04f7":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"modal"}},[a("div",{staticClass:"modal-mask"},[a("div",{staticClass:"modal-wrapper"},[a("div",{staticClass:"modal-container",class:t.wrapperClass},[a("div",{staticClass:"modal-header"},[t._t("header")],2),a("div",{staticClass:"modal-body"},[t._t("body")],2),a("div",{staticClass:"modal-footer"},[t._t("footer")],2)])])])])},s=[],r=(a("9c86"),{name:"modal",data:function(){return{modal:!1}},props:{big:{type:Boolean,default:!1}},mounted:function(){var t=this;document.addEventListener("keydown",function(e){27==e.keyCode&&t.$emit("onClose")})},computed:{wrapperClass:function(){return this.big?"big-modal":""}}}),o=r,n=(a("d93c"),a("2877")),l=Object(n["a"])(o,i,s,!1,null,null,null);l.options.__file="modal.vue";e["default"]=l.exports},1833:function(t,e,a){"use strict";var i=a("e066"),s=a.n(i);s.a},2389:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-2"},[t.tab.id?a("div",{staticClass:"row text-center"},[a("div",{staticClass:"col"},[a("a",{staticStyle:{color:"#49e387"},on:{click:t.updateTab}},[t._v(t._s(t.tab.title))])])]):t._e(),t.selected?a("modal",{attrs:{big:!0}},[t.tab.id?a("template",{slot:"header"},[a("div",{staticClass:"col text-right"},[t._v("\n        "+t._s(t.tab.title)+"\n      ")])]):t._e(),a("template",{slot:"body"},[a("div",{staticClass:"col"},[a("div",{staticClass:"row row-reverse"},[a("div",{staticClass:"col-6"},[a("div",{staticClass:"form-group with-icon-right",class:{"has-error":t.errors.has("title")}},[a("div",{staticClass:"input-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],attrs:{id:"title",name:"title"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}}),a("i",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("title"),expression:"errors.has('title')"}],staticClass:"fa fa-exclamation-triangle icon-right input-icon"}),a("label",{staticClass:"control-label",attrs:{for:"slug"}},[t._v(t._s(t._f("translate")("category.tab.title")))]),a("i",{staticClass:"bar"}),a("small",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("title"),expression:"errors.has('title')"}],staticClass:"help text-danger"},[t._v(t._s(t.errors.first("title"))+"\n                ")])])])]),a("div",{staticClass:"col-3"},[a("div",{staticClass:"form-group with-icon-right",class:{"has-error":t.errors.has("sort")}},[a("div",{staticClass:"input-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.sort,expression:"sort"}],attrs:{id:"sort",name:"sort",type:"number"},domProps:{value:t.sort},on:{input:function(e){e.target.composing||(t.sort=e.target.value)}}}),a("i",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("sort"),expression:"errors.has('sort')"}],staticClass:"fa fa-exclamation-triangle icon-right input-icon"}),a("label",{staticClass:"control-label",attrs:{for:"sort"}},[t._v(t._s(t._f("translate")("category.tab.sort")))]),a("i",{staticClass:"bar"}),a("small",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("sort"),expression:"errors.has('sort')"}],staticClass:"help text-danger"},[t._v(t._s(t.errors.first("sort"))+"\n                ")])])])]),a("div",{staticClass:"col-3"},[a("div",{staticClass:"form-group with-icon-right",class:{"has-error":t.errors.has("key")}},[a("div",{staticClass:"input-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.key,expression:"key"}],attrs:{id:"key",name:"key"},domProps:{value:t.key},on:{input:function(e){e.target.composing||(t.key=e.target.value)}}}),a("i",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("key"),expression:"errors.has('key')"}],staticClass:"fa fa-exclamation-triangle icon-right input-icon"}),a("label",{staticClass:"control-label",attrs:{for:"key"}},[t._v(t._s(t._f("translate")("category.tab.key")))]),a("i",{staticClass:"bar"}),a("small",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("key"),expression:"errors.has('key')"}],staticClass:"help text-danger"},[t._v("\n                  "+t._s(t.errors.first("key"))+"\n                ")])])])])]),t.tab.id&&t.images?a("div",{staticClass:"row mt-2"},[a("div",{staticClass:"col-3"},[a("Uploader",{attrs:{maxFiles:1,placeholder:t._f("translate")("category.tab.hover"),images:t.getHover,apiUrl:t.hoverApiUrl},on:{onChange:t.reInitImages}})],1),a("div",{staticClass:"col-3"},[a("Uploader",{attrs:{maxFiles:1,placeholder:t._f("translate")("category.tab.image"),images:t.getImage,apiUrl:t.imageApiUrl},on:{onChange:t.reInitImages}})],1),a("div",{staticClass:"col-6"},[a("Uploader",{attrs:{placeholder:t._f("translate")("category.tab.images"),images:t.getImages,apiUrl:t.apiUrl},on:{onChange:t.reInitImages}})],1)]):t._e(),a("div",{staticClass:"row mt-2"},[a("Editor",{attrs:{editor_id:"tab_"+t.data.id,mode:"classic"},on:{editor:t.handleEditor}})],1)])]),a("template",{slot:"footer"},[a("div",{staticClass:"btn btn-danger btn-with-icon btn-micro",on:{click:t.del}},[a("div",{staticClass:"btn-with-icon-content"},[t._v("\n          "+t._s(t._f("translate")("category.tab.delete"))+"\n        ")])]),t.tab.id?a("div",{staticClass:"btn btn-warning btn-with-icon btn-micro",on:{click:t.closeTab}},[a("div",{staticClass:"btn-with-icon-content"},[t._v("\n          "+t._s(t._f("translate")("modal.close"))+"\n        ")])]):t._e(),a("div",{staticClass:"btn btn-primary btn-with-icon btn-micro",on:{click:t.add}},[a("div",{staticClass:"btn-with-icon-content"},[t._v("\n          "+t._s(t._f("translate")(t.tab.id?"category.tab.update":"category.tab.add"))+"\n        ")])])])],2):t._e()],1)},s=[],r=(a("55dd"),a("c5f6"),a("cadf"),a("551c"),a("097d"),a("d1d4")),o=a("04f7"),n=a("38c1"),l=a("a1fc"),c={name:"tab",data:function(){return{tab:{},id:"",title:"",sort:1,key:"",editor:null,loaded:!1,images:!1}},props:{data:{type:Object,required:!0},selected:{type:Boolean,default:!1},category_id:{type:Number,required:!0}},components:{Modal:o["default"],Editor:n["default"],Uploader:l["default"]},created:function(){this.init()},methods:{init:function(){if(this.data.id){var t=this;this.tab=this.data,this.id=this.tab.id,this.title=this.tab.title,this.sort=this.tab.sort,this.key=this.tab.key,setTimeout(function(){return t.images=!0},1e3)}},add:function(){var t=this;if(this.tab.id){var e={key:this.key,sort:this.sort,title:this.title,content:this.editor.getContents()};r["a"].put("categories/tabs/"+this.category_id+"/"+this.tab.id,e).then(function(e){t.$store.dispatch("addToastMessage",{text:t.$t("category.tab.updated"),type:"success"}),t.$emit("update",e.data),t.$emit("selectTab",null)}).catch(function(e){for(var a in e.data.errors)e.data.errors[a].map(function(e){t.$store.dispatch("addToastMessage",{text:e})})})}else{var a={category_id:this.category_id,sort:this.sort,key:this.key,title:this.title,content:this.editor.getContents()};r["a"].post("categories/tabs/"+this.category_id,a).then(function(e){t.$store.dispatch("addToastMessage",{text:t.$t("category.tab.created"),type:"success"}),t.$emit("update",e.data)}).catch(function(e){for(var a in e.data.errors)e.data.errors[a].map(function(e){t.$store.dispatch("addToastMessage",{text:e})})})}},del:function(){var t=this,e=this;this.$swal({title:"Are you sure?",text:"You won't be able to revert this!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(function(a){a.value&&(e.tab.id?r["a"].delete("categories/tabs/"+e.category_id+"/"+e.tab.id).then(function(e){t.$store.dispatch("addToastMessage",{text:t.$t("category.tab.updated"),type:"success"}),t.$emit("update",e.data)}).catch(function(e){t.$store.dispatch("addToastMessage",{text:t.$t("errors.any"),error:e})}):e.$emit("del",e.data))})},updateTab:function(){this.$emit("selectTab",this.tab.id)},closeTab:function(){this.$emit("selectTab",null)},handleEditor:function(t){this.editor=t,this.tab.id&&this.editor.setContents(this.tab.content||"")},getImages:function(){var t=this.tab.images.data||[];return t},getImage:function(){var t=this.tab.image?[this.tab.image.data]:[];return t},getHover:function(){var t=this.tab.hover?[this.tab.hover.data]:[];return t},reInitImages:function(t){this.images=!1,this.$emit("updateImages",t.data)}},computed:{apiUrl:function(){return"categories/tabs/"+this.tab.id+"/upload/images"},hoverApiUrl:function(){return"categories/tabs/"+this.tab.id+"/upload/hover"},imageApiUrl:function(){return"categories/tabs/"+this.tab.id+"/upload/image"}},watch:{data:function(){this.init()}}},d=c,u=(a("1833"),a("2877")),m=Object(u["a"])(d,i,s,!1,null,null,null);m.options.__file="tab.vue";e["default"]=m.exports},"2ca8":function(t,e,a){"use strict";var i=a("e266"),s=a.n(i);s.a},"84eb":function(t,e,a){},"9b7a":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row row-reverse"},[a("div",{staticClass:"col-12 mb-3 mt-3 text-center"},[a("div",{staticClass:"btn btn-primary btn-with-icon btn-micro",on:{click:t.add}},[t._v("\n        "+t._s(t.$t("category.tab.add"))+"\n      ")])]),t._l(this.data,function(e,i){return a("tab",{key:i+1,attrs:{data:e,selected:t.isSelected(e),category_id:t.category_id},on:{del:t.del,update:t.update,selectTab:t.selectTab,updateImages:t.updateImages}})})],2)},s=[],r=(a("c5f6"),a("2389")),o=(a("240f"),{name:"tabs",data:function(){return{selected:null}},props:{tabs:{type:Array,required:!0},category_id:{type:Number,required:!0}},components:{Tab:r["default"]},methods:{isSelected:function(t){var e=!t.id||this.selected===t.id;return e},add:function(){this.$emit("addTab")},del:function(t){this.$emit("delTab",t)},update:function(t){this.$emit("update",t)},updateImages:function(t){this.$emit("updateImages",t)},selectTab:function(t){this.selected=t}},computed:{data:function(){return this.tabs}}}),n=o,l=a("2877"),c=Object(l["a"])(n,i,s,!1,null,null,null);c.options.__file="tabs.vue";e["default"]=c.exports},"9c86":function(t,e,a){"use strict";a("386b")("big",function(t){return function(){return t(this,"big","","")}})},a1fc:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("vue-dropzone",{ref:"dropzoneRef",attrs:{id:"dropzone",options:t.options,useCustomSlot:!!t.defaultImg}},[a("div",{staticClass:"dropzone-bg",style:t.bg,on:{mouseover:function(e){t.hoverSlot=!0},mouseleave:function(e){t.hoverSlot=!1}}},[a("transition",{attrs:{name:"fade"}},[a("i",{directives:[{name:"show",rawName:"v-show",value:t.hoverSlot,expression:"hoverSlot"}],staticClass:"glyphicon glyphicon-pencil"})])],1)]),t.file?a("modal",{on:{onClose:function(e){t.file=!1}}},[t.onlyImg?t._e():a("template",{slot:"header"},[a("div",{staticClass:"col text-center"},[t._v("\n        "+t._s(t.file.name)+"\n      ")])]),a("template",{slot:"body"},[a("div",{staticClass:"modal-body text-center"},[a("img",{attrs:{src:t.file.url.medium}}),t._l(t.file.url,function(e,i){return t.onlyImg?t._e():a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-3"},[t._v("\n            "+t._s(t._f("translate")("uploader."+i))+" :\n          ")]),a("div",{staticClass:"col-md-9 text-center"},[a("a",{staticClass:"btn btn-info btn-micro",attrs:{target:"_blank",href:e},domProps:{innerHTML:t._s(t.$t("uploader.open"))}}),a("button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:"file.url."+i,expression:"`file.url.${index}`",arg:"copy"}],staticClass:"btn btn-primary btn-micro",staticStyle:{"margin-right":"10px"},domProps:{innerHTML:t._s(t.$t("uploader.copy"))}})])])})],2)]),a("template",{slot:"footer"},[a("button",{staticClass:"btn btn-info btn-micro",domProps:{innerHTML:t._s(t.$t("uploader.close"))},on:{click:function(e){t.file=!1}}}),t.allowDelete?a("button",{staticClass:"btn btn-danger btn-micro",domProps:{innerHTML:t._s(t.$t("uploader.delete"))},on:{click:t.deleteFile}}):t._e()])],2):t._e()],1)},s=[],r=(a("7f7f"),a("f386"),a("c5f6"),a("04f7")),o=a("d1d4"),n=a("92c3"),l=a.n(n),c=(a("1e3f"),{name:"uploader",data:function(){return{file:!1,options:{},loading:!1,deleting:!1,hoverSlot:!1}},props:{hasSlot:{type:Boolean,defalut:!1},apiUrl:{type:String,required:!0},deleteApiUrl:{type:String,default:""},images:{type:Function,required:!0},maxFiles:{type:Number,default:100},allowDelete:{type:Boolean,default:!0},onlyImg:{type:Boolean,default:!1},placeholder:String,defaultImg:String},components:{Modal:r["default"],vueDropzone:l.a},created:function(){var t=this,e=this.$store.getters.token;this.options={timeout:5e3,maxFilesize:4,uploadMultiple:!1,maxFiles:this.maxFiles,acceptedFiles:".jpeg,.jpg,.png,.gif",url:"api/".concat(this.apiUrl),headers:{Authorization:"Bearer ".concat(e)},dictFileTooBig:this.$i18n.translate("file.big"),dictDefaultMessage:this.placeholder||this.$i18n.translate("file.upload"),renameFile:function(e){return t.renameFile(e)},success:function(e,a){return t.onSuccess(e,a)},error:function(e,a,i){return t.onError(e,a,i)}}},mounted:function(){this.init()},beforeDestroy:function(){this.$refs.dropzoneRef.destroy()},computed:{bg:function(){var t=this.defaultImg;return"background-image: url('".concat(t,"')")}},methods:{init:function(){var t=this,e=this.images();e.map(function(e){return t.$refs.dropzoneRef.manuallyAddFile(e,e.url.small)}),this.addOnClick()},reInit:function(t){this.$emit("onChange",t),this.$refs.dropzoneRef.removeAllFiles(),this.init()},addOnClick:function(){var t=this;this.$refs.dropzoneRef.dropzone.files.map(function(e){e.previewElement.addEventListener("click",function(){t.file=e})})},renameFile:function(t){var e=new Date,a=e.getTime();return a+"-"+t.name},onSuccess:function(t,e){this.reInit(e)},onError:function(t,e,a){this.$refs.dropzoneRef.removeFile(t),this.$store.dispatch("addToastMessage",{text:e})},deleteFile:function(){if(this.allowDelete&&!this.deleting){var t=this,e=this.file;this.$swal({type:"warning",showCancelButton:!0,cancelButtonColor:"#d33",confirmButtonColor:"#3085d6",title:t.$i18n.translate("alert.sure"),text:t.$i18n.translate("alert.sure_text"),cancelButtonText:t.$i18n.translate("alert.cancel"),confirmButtonText:t.$i18n.translate("alert.confirm")}).then(function(a){a.value&&(t.deleting=!0,o["a"].post(t.deleteApiUrl?t.deleteApiUrl:"".concat(t.apiUrl,"/").concat(e.id)).then(function(e){t.reInit(e),t.$swal({type:"success",title:t.$i18n.translate("uploader.deleted"),text:t.$i18n.translate("uploader.deleted_text"),confirmButtonText:t.$i18n.translate("alert.confirm")})}).finally(function(){t.file=!1,t.deleting=!1}))})}}}}),d=c,u=(a("2ca8"),a("2877")),m=Object(u["a"])(d,i,s,!1,null,null,null);m.options.__file="uploader.vue";e["default"]=m.exports},d93c:function(t,e,a){"use strict";var i=a("84eb"),s=a.n(i);s.a},e066:function(t,e,a){},e266:function(t,e,a){}}]);
//# sourceMappingURL=chunk-632cffa5.1f313242.js.map