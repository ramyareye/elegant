{"version":3,"sources":["webpack:///./src/view/users/role/update.vue?84d2","webpack:///src/view/users/role/update.vue","webpack:///./src/view/users/role/update.vue?8ee9","webpack:///./src/view/users/role/update.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","headerText","role","name","_v","_s","_f","_l","permission","key","id","directives","rawName","value","expression","type","domProps","checked","Array","isArray","permissions","_i","on","change","$event","$$a","$$el","target","$$c","$$v","$$i","concat","slice","for","click","add","staticRenderFns","updatevue_type_script_lang_js_","data","permissionsItems","created","_this","Api","get","$route","params","then","response","res","map","per","loaded","catch","error","$store","dispatch","text","vue_esm","i18n","translate","status_code","$router","push","status","methods","_this2","$validator","validateAll","result","put","message","role_updatevue_type_script_lang_js_","component","Object","componentNormalizer","options","__file","__webpack_exports__"],"mappings":"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","file":"vuestic/js/chunk-2d0b2b46.9ebd2f45.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"form-elements\"},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-md-12\"},[_c('vuestic-widget',{attrs:{\"headerText\":_vm.role.name}},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col\"},[_c('blockquote',{staticClass:\"blockquote\"},[_vm._v(\"\\n              \"+_vm._s(_vm._f(\"translate\")('role.permissions'))+\"\\n            \")])])]),_c('div',{staticClass:\"row\"},_vm._l((_vm.permissionsItems),function(permission){return _c('div',{key:permission.id,staticClass:\"col col-md-3\"},[_c('div',{staticClass:\"checkbox\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.permissions),expression:\"permissions\"}],attrs:{\"type\":\"checkbox\",\"name\":\"permissions\",\"name\":permission.id},domProps:{\"value\":permission.id,\"checked\":Array.isArray(_vm.permissions)?_vm._i(_vm.permissions,permission.id)>-1:(_vm.permissions)},on:{\"change\":function($event){var $$a=_vm.permissions,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=permission.id,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.permissions=$$a.concat([$$v]))}else{$$i>-1&&(_vm.permissions=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.permissions=$$c}}}}),_c('label',{attrs:{\"for\":permission.id}},[_vm._v(_vm._s(permission.name))])])])})),_c('div',{staticClass:\"row mt-3\"},[_c('div',{staticClass:\"col text-center\"},[_c('button',{staticClass:\"btn btn-success\",on:{\"click\":_vm.add}},[_vm._v(\"\\n              \"+_vm._s(_vm._f(\"translate\")('buttons.update'))+\"\\n            \")])])])])],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"form-elements\">\n    <div class=\"row\">\n      <div class=\"col-md-12\">\n        <vuestic-widget :headerText=\"role.name\">\n          <div class=\"row\">\n            <div class=\"col\">\n              <blockquote class=\"blockquote\">\n                {{ 'role.permissions' | translate }}\n              </blockquote>\n            </div>\n          </div>\n\n          <div class=\"row\">\n            <div class=\"col col-md-3\"\n                 :key=\"permission.id\"\n                 v-for=\"permission in permissionsItems\">\n              <div class=\"checkbox\">\n                <input type=\"checkbox\" \n                  name=\"permissions\" \n                  :name=\"permission.id\"\n                  :value=\"permission.id\" \n                  v-model=\"permissions\">\n                <label :for=\"permission.id\">{{ permission.name }}</label>\n              </div>\n            </div>\n          </div>\n\n          <div class=\"row mt-3\">\n            <div class=\"col text-center\">\n              <button class=\"btn btn-success\"  @click=\"add\">\n                {{'buttons.update' | translate}}\n              </button>\n            </div>\n          </div>\n        </vuestic-widget>        \n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n  import Vue from 'vue'\n  import api from 'src/packages/Api'\n\n  export default {\n    name: 'update-role',\n    data () {\n      return {\n        role: {},\n        id: '',\n        name: '',\n        permissions: [],\n        permissionsItems: []\n      }\n    },\n    created () {\n      api.get(`roles/${this.$route.params.id}`).then(response => {\n        const res = response.data\n\n        this.role = res\n        this.id = res.id\n        this.name = res.name\n        this.permissions = res.permissions.data.map(per => per.id)\n\n        this.loaded = true\n      }).catch(error => {\n        this.$store.dispatch('addToastMessage',\n          { text: Vue.i18n.translate(`errors.${error.data.status_code}`) }\n        )\n        this.$router.push({ name: 'roles' })\n      })\n      api.get('permissions').then(res => {\n        this.permissionsItems = res.data\n      }).catch(error => {\n        this.$store.dispatch('addToastMessage',\n          { text: Vue.i18n.translate(`errors.${error.status}`) }\n        )        \n        this.$router.push({ name: 'roles' })\n      })\n    },\n    methods: {\n      add () {\n        this.$validator.validateAll().then((result) => {\n          if (result) {\n            const data = {\n              name: this.name,\n              permissions: this.permissions\n            }\n\n            api.put(`roles/${this.id}`, data).then(response => {\n              this.$store.dispatch('addToastMessage',\n                { text: Vue.i18n.translate('role.updated'), type: 'success' }\n              )\n              this.$router.push({ name: 'role', params: { id: response.data.id } })\n            }).catch(error => {\n              this.$store.dispatch('addToastMessage',\n                { text: Vue.i18n.translate('errors.any'), error }\n              )\n              this.$store.dispatch('addToastMessage',\n                { text: error.data.message }\n              )\n            })\n          }\n        })\n      }\n    }\n  }\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./update.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./update.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./update.vue?vue&type=template&id=15699e55&\"\nimport script from \"./update.vue?vue&type=script&lang=js&\"\nexport * from \"./update.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"update.vue\"\nexport default component.exports"],"sourceRoot":""}