(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-99911eae"],{"1c57":function(t,e,a){},cd08:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.loaded?a("div",{staticClass:"form-elements"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("vuestic-widget",{attrs:{headerText:t.setTitle()}},[a("div",{staticClass:"row well mt-1",staticStyle:{direction:"rtl"},domProps:{innerHTML:t._s(t.question)}}),a("div",{staticClass:"row text-right"},[a("div",{staticClass:"col chat-holder"},[a("chat",{ref:"chatbox",attrs:{height:t.chatHeight,value:t.chatMessages,statuses:t.statuses,attachments:t.attachments},on:{input:t.newMessage,update:t.updateMessage,delete:t.deleteMessage}})],1)]),a("div",{staticClass:"row mt-5"},[a("div",{staticClass:"col text-center"},[a("button",{staticClass:"btn btn-warning",staticStyle:{"margin-left":"5px"},on:{click:t.back}},[t._v("\n                "+t._s(t._f("translate")("buttons.back"))+"\n              ")])])])])],1)])]):a("loading")},n=[],i=(a("96cf"),a("cb0c")),c=(a("cadf"),a("551c"),a("097d"),a("a026")),r=a("d1d4"),o=a("c757"),u=a("240f"),d={name:"update-consult",data:function(){return{consult:{},title:"",question:"",category_id:"",writer_id:"",status:"askedByUser",topic_privacy:"public",closed_at:"",answers:[],attachments:[],writer:{},chatMessages:[],statuses:[],loaded:!1}},components:{Loading:u["default"],Chat:o["default"]},created:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r["a"].get("consults/".concat(this.$route.params.id));case 3:return e=t.sent,t.next=6,r["a"].post("consults/status");case 6:a=t.sent,this.init(e.data),this.statuses=a,this.loaded=!0,t.next=16;break;case 12:t.prev=12,t.t0=t["catch"](0),this.$store.dispatch("addToastMessage",{text:c["default"].i18n.translate("errors.".concat(t.t0.status_code))}),this.$router.push({name:"consults"});case 16:case"end":return t.stop()}},t,this,[[0,12]])}));return function(){return t.apply(this,arguments)}}(),methods:{init:function(t){this.consult=t,this.title=t.title,this.question=t.question,this.category_id=t.category_id,this.writer_id=t.writer_id,this.status=t.status,this.topic_privacy=t.topic_privacy,this.closed_at=t.closed_at,this.writer=t.writer.data,this.answers=t.answers.data,this.attachments=t.attachments.data,this.chatMessages=t.answers.data.map(function(e){return{id:e.id,text:e.content,status:e.status,yours:t.writer_id!==e.writer_id,writer:e.writer.data,date:e.date,time:e.created_at_time}})},setTitle:function(){return this.title||c["default"].i18n.translate("consult.no_title")},back:function(){this.$router.back()},newMessage:function(t){var e=this,a={text:t.text,status:t.status};r["a"].put("consults/".concat(this.$route.params.id),a).then(function(t){e.init(t.data),e.$refs.chatbox.clear()}).catch(function(t){e.$store.dispatch("addToastMessage",{text:c["default"].i18n.translate("errors.".concat(t.status))})})},updateMessage:function(t){var e=this,a=t.text,s=t.status,n=t.updateId,i={text:a,status:s};r["a"].put("consults/".concat(this.$route.params.id,"/").concat(n),i).then(function(t){e.init(t.data),e.$refs.chatbox.clear()}).catch(function(t){e.$store.dispatch("addToastMessage",{text:c["default"].i18n.translate("errors.".concat(t.status))})})},deleteMessage:function(t){var e=this;this.$swal({title:"Are you sure?",text:"You won't be able to revert this!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(function(a){a.value&&r["a"].post("consults/".concat(e.$route.params.id,"/").concat(t)).then(function(t){e.init(t.data),e.$refs.chatbox.clear()}).catch(function(t){var a=t.data.message?t.data.message:c["default"].i18n.translate("errors.".concat(t.status));e.$store.dispatch("addToastMessage",{text:a})})})}},computed:{chatHeight:function(){var t=this.chatMessages.length;return 10*t+"rem"}}},l=d,h=(a("e868"),a("2877")),p=Object(h["a"])(l,s,n,!1,null,null,null);p.options.__file="update.vue";e["default"]=p.exports},e868:function(t,e,a){"use strict";var s=a("1c57"),n=a.n(s);n.a}}]);
//# sourceMappingURL=chunk-99911eae.867a567c.js.map