(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2c9e12e0","chunk-6cf7b916"],{"04f7":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"modal"}},[n("div",{staticClass:"modal-mask"},[n("div",{staticClass:"modal-wrapper"},[n("div",{staticClass:"modal-container",class:e.wrapperClass},[n("div",{staticClass:"modal-header"},[e._t("header")],2),n("div",{staticClass:"modal-body"},[e._t("body")],2),n("div",{staticClass:"modal-footer"},[e._t("footer")],2)])])])])},o=[],a=(n("9c86"),{name:"modal",data:function(){return{modal:!1}},props:{big:{type:Boolean,default:!1}},mounted:function(){var e=this;document.addEventListener("keydown",function(t){27==t.keyCode&&e.$emit("onClose")})},computed:{wrapperClass:function(){return this.big?"big-modal":""}}}),l=a,r=(n("d93c"),n("2877")),s=Object(r["a"])(l,i,o,!1,null,null,null);s.options.__file="modal.vue";t["default"]=s.exports},"2ca8":function(e,t,n){"use strict";var i=n("e266"),o=n.n(i);o.a},"84eb":function(e,t,n){},"9c86":function(e,t,n){"use strict";n("386b")("big",function(e){return function(){return e(this,"big","","")}})},a1fc:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("vue-dropzone",{ref:"dropzoneRef",attrs:{id:"dropzone",options:e.options,useCustomSlot:!!e.defaultImg}},[n("div",{staticClass:"dropzone-bg",style:e.bg,on:{mouseover:function(t){e.hoverSlot=!0},mouseleave:function(t){e.hoverSlot=!1}}},[n("transition",{attrs:{name:"fade"}},[n("i",{directives:[{name:"show",rawName:"v-show",value:e.hoverSlot,expression:"hoverSlot"}],staticClass:"glyphicon glyphicon-pencil"})])],1)]),e.file?n("modal",{on:{onClose:function(t){e.file=!1}}},[e.onlyImg?e._e():n("template",{slot:"header"},[n("div",{staticClass:"col text-center"},[e._v("\n        "+e._s(e.file.name)+"\n      ")])]),n("template",{slot:"body"},[n("div",{staticClass:"modal-body text-center"},[n("img",{attrs:{src:e.file.url.medium}}),e._l(e.file.url,function(t,i){return e.onlyImg?e._e():n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-3"},[e._v("\n            "+e._s(e._f("translate")("uploader."+i))+" :\n          ")]),n("div",{staticClass:"col-md-9 text-center"},[n("a",{staticClass:"btn btn-info btn-micro",attrs:{target:"_blank",href:t},domProps:{innerHTML:e._s(e.$t("uploader.open"))}}),n("button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:"file.url."+i,expression:"`file.url.${index}`",arg:"copy"}],staticClass:"btn btn-primary btn-micro",staticStyle:{"margin-right":"10px"},domProps:{innerHTML:e._s(e.$t("uploader.copy"))}})])])})],2)]),n("template",{slot:"footer"},[n("button",{staticClass:"btn btn-info btn-micro",domProps:{innerHTML:e._s(e.$t("uploader.close"))},on:{click:function(t){e.file=!1}}}),e.allowDelete?n("button",{staticClass:"btn btn-danger btn-micro",domProps:{innerHTML:e._s(e.$t("uploader.delete"))},on:{click:e.deleteFile}}):e._e()])],2):e._e()],1)},o=[],a=(n("7f7f"),n("f386"),n("c5f6"),n("04f7")),l=n("d1d4"),r=n("92c3"),s=n.n(r),c=(n("1e3f"),{name:"uploader",data:function(){return{file:!1,options:{},loading:!1,deleting:!1,hoverSlot:!1}},props:{hasSlot:{type:Boolean,defalut:!1},apiUrl:{type:String,required:!0},deleteApiUrl:{type:String,default:""},images:{type:Function,required:!0},maxFiles:{type:Number,default:100},allowDelete:{type:Boolean,default:!0},onlyImg:{type:Boolean,default:!1},placeholder:String,defaultImg:String},components:{Modal:a["default"],vueDropzone:s.a},created:function(){var e=this,t=this.$store.getters.token;this.options={timeout:5e3,maxFilesize:4,uploadMultiple:!1,maxFiles:this.maxFiles,acceptedFiles:".jpeg,.jpg,.png,.gif",url:"api/".concat(this.apiUrl),headers:{Authorization:"Bearer ".concat(t)},dictFileTooBig:this.$i18n.translate("file.big"),dictDefaultMessage:this.placeholder||this.$i18n.translate("file.upload"),renameFile:function(t){return e.renameFile(t)},success:function(t,n){return e.onSuccess(t,n)},error:function(t,n,i){return e.onError(t,n,i)}}},mounted:function(){this.init()},beforeDestroy:function(){this.$refs.dropzoneRef.destroy()},computed:{bg:function(){var e=this.defaultImg;return"background-image: url('".concat(e,"')")}},methods:{init:function(){var e=this,t=this.images();t.map(function(t){return e.$refs.dropzoneRef.manuallyAddFile(t,t.url.small)}),this.addOnClick()},reInit:function(e){this.$emit("onChange",e),this.$refs.dropzoneRef.removeAllFiles(),this.init()},addOnClick:function(){var e=this;this.$refs.dropzoneRef.dropzone.files.map(function(t){t.previewElement.addEventListener("click",function(){e.file=t})})},renameFile:function(e){var t=new Date,n=t.getTime();return n+"-"+e.name},onSuccess:function(e,t){this.reInit(t)},onError:function(e,t,n){this.$refs.dropzoneRef.removeFile(e),this.$store.dispatch("addToastMessage",{text:t})},deleteFile:function(){if(this.allowDelete&&!this.deleting){var e=this,t=this.file;this.$swal({type:"warning",showCancelButton:!0,cancelButtonColor:"#d33",confirmButtonColor:"#3085d6",title:e.$i18n.translate("alert.sure"),text:e.$i18n.translate("alert.sure_text"),cancelButtonText:e.$i18n.translate("alert.cancel"),confirmButtonText:e.$i18n.translate("alert.confirm")}).then(function(n){n.value&&(e.deleting=!0,l["a"].post(e.deleteApiUrl?e.deleteApiUrl:"".concat(e.apiUrl,"/").concat(t.id)).then(function(t){e.reInit(t),e.$swal({type:"success",title:e.$i18n.translate("uploader.deleted"),text:e.$i18n.translate("uploader.deleted_text"),confirmButtonText:e.$i18n.translate("alert.confirm")})}).finally(function(){e.file=!1,e.deleting=!1}))})}}}}),u=c,d=(n("2ca8"),n("2877")),f=Object(d["a"])(u,i,o,!1,null,null,null);f.options.__file="uploader.vue";t["default"]=f.exports},d93c:function(e,t,n){"use strict";var i=n("84eb"),o=n.n(i);o.a},e266:function(e,t,n){}}]);
//# sourceMappingURL=chunk-2c9e12e0.f202ac8b.js.map