(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3f0deac4","chunk-6cf7b916","chunk-2c9e12e0"],{"04f7":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"modal"}},[a("div",{staticClass:"modal-mask"},[a("div",{staticClass:"modal-wrapper"},[a("div",{staticClass:"modal-container",class:t.wrapperClass},[a("div",{staticClass:"modal-header"},[t._t("header")],2),a("div",{staticClass:"modal-body"},[t._t("body")],2),a("div",{staticClass:"modal-footer"},[t._t("footer")],2)])])])])},i=[],r=(a("9c86"),{name:"modal",data:function(){return{modal:!1}},props:{big:{type:Boolean,default:!1}},mounted:function(){var t=this;document.addEventListener("keydown",function(e){27==e.keyCode&&t.$emit("onClose")})},computed:{wrapperClass:function(){return this.big?"big-modal":""}}}),n=r,o=(a("d93c"),a("2877")),l=Object(o["a"])(n,s,i,!1,null,null,null);l.options.__file="modal.vue";e["default"]=l.exports},"0e1e":function(t,e,a){},"2ca8":function(t,e,a){"use strict";var s=a("e266"),i=a.n(s);i.a},"3b89":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.loaded?a("div",{staticClass:"form-elements"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("vuestic-widget",{attrs:{headerText:t._f("translate")("menu.departments.update")}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("div",{staticClass:"row row-reverse"},[a("div",{staticClass:"col-4"},[a("div",{staticClass:"row row-reverse"},[a("div",{staticClass:"col"},[a("div",{staticClass:"form-group with-icon-right",class:{"has-error":t.errors.has("title")}},[a("div",{staticClass:"input-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{id:"title",name:"title",required:""},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}}),a("i",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("title"),expression:"errors.has('title')"}],staticClass:"fa fa-exclamation-triangle icon-right input-icon"}),a("label",{staticClass:"control-label",attrs:{for:"title"}},[t._v(t._s(t._f("translate")("department.title")))]),a("i",{staticClass:"bar"}),a("small",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("title"),expression:"errors.has('title')"}],staticClass:"help text-danger"},[t._v(t._s(t.errors.first("title"))+"\n                        ")])])])]),a("div",{staticClass:"col"},[a("div",{staticClass:"form-group with-icon-right",class:{"has-error":t.errors.has("slug")}},[a("div",{staticClass:"input-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.slug,expression:"slug"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{id:"slug",name:"slug",required:""},domProps:{value:t.slug},on:{input:function(e){e.target.composing||(t.slug=e.target.value)}}}),a("i",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("slug"),expression:"errors.has('slug')"}],staticClass:"fa fa-exclamation-triangle icon-right input-icon"}),a("label",{staticClass:"control-label",attrs:{for:"slug"}},[t._v(t._s(t._f("translate")("page.slug")))]),a("i",{staticClass:"bar"}),a("small",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("slug"),expression:"errors.has('slug')"}],staticClass:"help text-danger"},[t._v(t._s(t.errors.first("slug"))+"\n                        ")])])])]),a("div",{staticClass:"col"},[a("div",{staticClass:"form-group with-icon-right",class:{"has-error":t.errors.has("sort")}},[a("div",{staticClass:"input-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.sort,expression:"sort"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{id:"sort",name:"sort",type:"number",required:""},domProps:{value:t.sort},on:{input:function(e){e.target.composing||(t.sort=e.target.value)}}}),a("i",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("sort"),expression:"errors.has('sort')"}],staticClass:"fa fa-exclamation-triangle icon-right input-icon"}),a("label",{staticClass:"control-label",attrs:{for:"sort"}},[t._v(t._s(t._f("translate")("department.sort")))]),a("i",{staticClass:"bar"}),a("small",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("sort"),expression:"errors.has('sort')"}],staticClass:"help text-danger"},[t._v(t._s(t.errors.first("sort"))+"\n                        ")])])])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.clinics,expression:"clinics"}],staticClass:"col-md-12",staticStyle:{"min-height":"100px"},attrs:{id:"clinics",placeholder:t._f("translate")("department.clinics")},domProps:{value:t.clinics},on:{input:function(e){e.target.composing||(t.clinics=e.target.value)}}})])])]),a("div",{staticClass:"col-8"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("Uploader",{attrs:{maxFiles:1,placeholder:t._f("translate")("department.image"),images:t.getImage,apiUrl:t.imageApiUrl},on:{onChange:t.reInitImages}})],1),a("div",{staticClass:"col"},[a("Uploader",{attrs:{maxFiles:1,placeholder:t._f("translate")("department.cover"),images:t.getCover,apiUrl:t.coverApiUrl},on:{onChange:t.reInitImages}})],1)])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col mt-3 mb-5"},[a("Uploader",{attrs:{apiUrl:t.apiUrl,images:t.getImages},on:{onChange:t.reInitImages}})],1)]),a("div",{staticClass:"row mt-5"},[a("Editor",{on:{editor:t.handleEditor}})],1)])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col col text-center mt-4"},[a("button",{staticClass:"btn btn-success",on:{click:t.update}},[t._v("\n              "+t._s(t._f("translate")("buttons.update"))+"\n            ")])])])])],1)])]):a("loading")},i=[],r=(a("55dd"),a("d1d4")),n=a("240f"),o=a("38c1"),l=a("a1fc"),c={name:"update-department",data:function(){return{department:{},title:"",slug:"",clinics:"",data:"",sort:"",editor:null,loaded:!1,apiUrl:"departments/"+this.$route.params.id+"/upload/images",coverApiUrl:"departments/"+this.$route.params.id+"/upload/cover",imageApiUrl:"departments/"+this.$route.params.id+"/upload/image"}},components:{Editor:o["default"],Loading:n["default"],Uploader:l["default"]},created:function(){var t=this;r["a"].get("departments/".concat(this.$route.params.id)).then(function(e){var a=e.data;t.department=a,t.id=a.id,t.title=a.title,t.slug=a.slug,t.clinics=a.clinics,t.data=a.data,t.sort=a.sort,t.loaded=!0}).catch(function(e){t.$store.dispatch("addToastMessage",{text:t.$t("errors.".concat(e.data.status_code))}),t.$router.push({name:"departments"})})},methods:{handleEditor:function(t){this.editor=t,this.editor.setContents(this.department.data)},getImages:function(){var t=this.department.images.data||[];return t},getCover:function(){var t=this.department.cover?[this.department.cover.data]:[];return t},getImage:function(){var t=this.department.image?[this.department.image.data]:[];return t},reInitImages:function(t){this.department=t.data},update:function(){var t=this;this.$validator.validateAll().then(function(e){if(e){var a={title:t.title,slug:t.slug,clinics:t.clinics,data:t.editor.getContents(),sort:t.sort};r["a"].put("departments/".concat(t.id),a).then(function(e){t.$store.dispatch("addToastMessage",{text:t.$t("department.updated"),type:"success"}),t.$router.push({name:"department",params:{id:e.data.id}})}).catch(function(e){t.$store.dispatch("addToastMessage",{text:t.$t("errors.any"),error:e})})}})}}},d=c,u=(a("d454"),a("2877")),m=Object(u["a"])(d,s,i,!1,null,null,null);m.options.__file="update.vue";e["default"]=m.exports},"84eb":function(t,e,a){},"9c86":function(t,e,a){"use strict";a("386b")("big",function(t){return function(){return t(this,"big","","")}})},a1fc:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("vue-dropzone",{ref:"dropzoneRef",attrs:{id:"dropzone",options:t.options,useCustomSlot:!!t.defaultImg}},[a("div",{staticClass:"dropzone-bg",style:t.bg,on:{mouseover:function(e){t.hoverSlot=!0},mouseleave:function(e){t.hoverSlot=!1}}},[a("transition",{attrs:{name:"fade"}},[a("i",{directives:[{name:"show",rawName:"v-show",value:t.hoverSlot,expression:"hoverSlot"}],staticClass:"glyphicon glyphicon-pencil"})])],1)]),t.file?a("modal",{on:{onClose:function(e){t.file=!1}}},[t.onlyImg?t._e():a("template",{slot:"header"},[a("div",{staticClass:"col text-center"},[t._v("\n        "+t._s(t.file.name)+"\n      ")])]),a("template",{slot:"body"},[a("div",{staticClass:"modal-body text-center"},[a("img",{attrs:{src:t.file.url.medium}}),t._l(t.file.url,function(e,s){return t.onlyImg?t._e():a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-3"},[t._v("\n            "+t._s(t._f("translate")("uploader."+s))+" :\n          ")]),a("div",{staticClass:"col-md-9 text-center"},[a("a",{staticClass:"btn btn-info btn-micro",attrs:{target:"_blank",href:e},domProps:{innerHTML:t._s(t.$t("uploader.open"))}}),a("button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:"file.url."+s,expression:"`file.url.${index}`",arg:"copy"}],staticClass:"btn btn-primary btn-micro",staticStyle:{"margin-right":"10px"},domProps:{innerHTML:t._s(t.$t("uploader.copy"))}})])])})],2)]),a("template",{slot:"footer"},[a("button",{staticClass:"btn btn-info btn-micro",domProps:{innerHTML:t._s(t.$t("uploader.close"))},on:{click:function(e){t.file=!1}}}),t.allowDelete?a("button",{staticClass:"btn btn-danger btn-micro",domProps:{innerHTML:t._s(t.$t("uploader.delete"))},on:{click:t.deleteFile}}):t._e()])],2):t._e()],1)},i=[],r=(a("7f7f"),a("f386"),a("c5f6"),a("04f7")),n=a("d1d4"),o=a("92c3"),l=a.n(o),c=(a("1e3f"),{name:"uploader",data:function(){return{file:!1,options:{},loading:!1,deleting:!1,hoverSlot:!1}},props:{hasSlot:{type:Boolean,defalut:!1},apiUrl:{type:String,required:!0},deleteApiUrl:{type:String,default:""},images:{type:Function,required:!0},maxFiles:{type:Number,default:100},allowDelete:{type:Boolean,default:!0},onlyImg:{type:Boolean,default:!1},placeholder:String,defaultImg:String},components:{Modal:r["default"],vueDropzone:l.a},created:function(){var t=this,e=this.$store.getters.token;this.options={timeout:5e3,maxFilesize:4,uploadMultiple:!1,maxFiles:this.maxFiles,acceptedFiles:".jpeg,.jpg,.png,.gif",url:"api/".concat(this.apiUrl),headers:{Authorization:"Bearer ".concat(e)},dictFileTooBig:this.$i18n.translate("file.big"),dictDefaultMessage:this.placeholder||this.$i18n.translate("file.upload"),renameFile:function(e){return t.renameFile(e)},success:function(e,a){return t.onSuccess(e,a)},error:function(e,a,s){return t.onError(e,a,s)}}},mounted:function(){this.init()},beforeDestroy:function(){this.$refs.dropzoneRef.destroy()},computed:{bg:function(){var t=this.defaultImg;return"background-image: url('".concat(t,"')")}},methods:{init:function(){var t=this,e=this.images();e.map(function(e){return t.$refs.dropzoneRef.manuallyAddFile(e,e.url.small)}),this.addOnClick()},reInit:function(t){this.$emit("onChange",t),this.$refs.dropzoneRef.removeAllFiles(),this.init()},addOnClick:function(){var t=this;this.$refs.dropzoneRef.dropzone.files.map(function(e){e.previewElement.addEventListener("click",function(){t.file=e})})},renameFile:function(t){var e=new Date,a=e.getTime();return a+"-"+t.name},onSuccess:function(t,e){this.reInit(e)},onError:function(t,e,a){this.$refs.dropzoneRef.removeFile(t),this.$store.dispatch("addToastMessage",{text:e})},deleteFile:function(){if(this.allowDelete&&!this.deleting){var t=this,e=this.file;this.$swal({type:"warning",showCancelButton:!0,cancelButtonColor:"#d33",confirmButtonColor:"#3085d6",title:t.$i18n.translate("alert.sure"),text:t.$i18n.translate("alert.sure_text"),cancelButtonText:t.$i18n.translate("alert.cancel"),confirmButtonText:t.$i18n.translate("alert.confirm")}).then(function(a){a.value&&(t.deleting=!0,n["a"].post(t.deleteApiUrl?t.deleteApiUrl:"".concat(t.apiUrl,"/").concat(e.id)).then(function(e){t.reInit(e),t.$swal({type:"success",title:t.$i18n.translate("uploader.deleted"),text:t.$i18n.translate("uploader.deleted_text"),confirmButtonText:t.$i18n.translate("alert.confirm")})}).finally(function(){t.file=!1,t.deleting=!1}))})}}}}),d=c,u=(a("2ca8"),a("2877")),m=Object(u["a"])(d,s,i,!1,null,null,null);m.options.__file="uploader.vue";e["default"]=m.exports},d454:function(t,e,a){"use strict";var s=a("0e1e"),i=a.n(s);i.a},d93c:function(t,e,a){"use strict";var s=a("84eb"),i=a.n(s);i.a},e266:function(t,e,a){}}]);
//# sourceMappingURL=chunk-3f0deac4.9e105b39.js.map