(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5afd478d","chunk-2d0a383c","chunk-6465b48c"],{"0303":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-6 mb-2"},[s("div",{staticClass:"row row-reverse"},[s("div",{staticClass:"col-4"},[s("multiselect",{attrs:{select:t.related.type,selects:t.types,rtl:!0,placeholder:t._f("translate")("related.type")},on:{select:t.selectType}})],1),s("div",{staticClass:"col-5"},[s("multiselect",{attrs:{rtl:!0,title:t.related.selector,apiUrl:t.apiUrl,select:t.related.id,selects:t.relations,placeholder:t._f("translate")("related.id")},on:{search:t.findRelations,select:t.selectRelated}})],1),s("div",{staticClass:"col-3 text-right"},[s("div",{staticClass:"btn btn-primary btn-with-icon btn-micro rounded-icon",on:{click:t.del}},[t._m(0)])])])])},a=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"btn-with-icon-content"},[s("i",{staticClass:"ion-md-close ion"})])}],r=s("2ef0"),n=s.n(r),o=s("02e0"),l={name:"related",data:function(){return{mounted:!1,apiUrl:"categories/search",types:[{id:"categories",name:this.$t("related.type_categories"),selector:"name"},{id:"blogs",name:this.$t("related.type_blogs"),selector:"title"},{id:"questions",name:this.$t("related.type_questions"),selector:"title"},{id:"videos",name:this.$t("related.type_videos"),selector:"title"}],relations:[]}},props:{related:{type:Object,required:!0}},components:{Multiselect:o["default"]},mounted:function(){n.a.isEmpty(this.related.id)||this.relations.push(this.related.id)},methods:{del:function(){this.$emit("del",this.related)},findRelations:function(t){this.relations=t},selectRelated:function(t){void 0!==t&&this.$emit("change",{old:this.related,changed:{id:t,type:this.related.type,selector:this.related.selector}})},selectType:function(t){this.mounted&&void 0!==t&&(this.mounted=!0,this.apiUrl="".concat(t.id,"/search"),this.$emit("change",{old:this.related,changed:{id:{},type:t,selector:t.selector}})),this.mounted=!0}}},d=l,c=s("2877"),u=Object(c["a"])(d,i,a,!1,null,null,null);u.options.__file="related.vue";e["default"]=u.exports},9892:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.loaded?s("div",{staticClass:"form-elements"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-12"},[s("vuestic-widget",{attrs:{headerText:t._f("translate")("menu.questions.update")}},[s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("div",{staticClass:"row row-reverse"},[s("div",{staticClass:"col"},[s("div",{staticClass:"form-group with-icon-right",class:{"has-error":t.errors.has("title")}},[s("div",{staticClass:"input-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{id:"title",name:"title",required:""},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}}),s("i",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("title"),expression:"errors.has('title')"}],staticClass:"fa fa-exclamation-triangle icon-right input-icon"}),s("label",{staticClass:"control-label",attrs:{for:"title"}},[t._v(t._s(t._f("translate")("question.title")))]),s("i",{staticClass:"bar"}),s("small",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("title"),expression:"errors.has('title')"}],staticClass:"help text-danger"},[t._v(t._s(t.errors.first("title"))+"\n                    ")])])])]),s("div",{staticClass:"col"},[s("vuestic-simple-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{label:t._f("translate")("question.question_type"),"option-key":"title",options:this.question_type},model:{value:t.question_typeItem,callback:function(e){t.question_typeItem=e},expression:"question_typeItem"}})],1),s("div",{staticClass:"col"},[s("vuestic-multi-select",{attrs:{"option-key":"title",options:this.category_id,label:t._f("translate")("question.questions")},model:{value:t.categoriesItems,callback:function(e){t.categoriesItems=e},expression:"categoriesItems"}})],1)]),s("div",{staticClass:"row row-reverse mb-4"},[s("div",{staticClass:"col-md-8 text-right"},[s("div",{staticClass:"form-group with-icon-right",class:{"has-error":t.errors.has("title")}},[s("div",{staticClass:"input-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.question_input,expression:"question_input"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{id:"question_input",name:"question_input",required:""},domProps:{value:t.question_input},on:{input:function(e){e.target.composing||(t.question_input=e.target.value)}}}),s("i",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("title"),expression:"errors.has('title')"}],staticClass:"fa fa-exclamation-triangle icon-right input-icon"}),s("label",{staticClass:"control-label",attrs:{for:"question"}},[t._v(t._s(t._f("translate")("question.question")))]),s("i",{staticClass:"bar"}),s("small",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("question"),expression:"errors.has('question')"}],staticClass:"help text-danger"},[t._v(t._s(t.errors.first("question"))+"\n                    ")])])])])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("Vueditor",{ref:"editor",staticStyle:{height:"500px"}})],1)])])]),s("relateds",{attrs:{relateds:t.related},on:{delRel:t.deleteRelated,changeRel:t.changeRelated}}),s("div",{staticClass:"row mt-5"},[s("div",{staticClass:"col col text-center"},[s("button",{staticClass:"btn btn-success",on:{click:t.update}},[t._v("\n              "+t._s(t._f("translate")("buttons.update"))+"\n            ")])])])],1)],1)])]):s("loading")},a=[],r=(s("96cf"),s("cb0c")),n=(s("cadf"),s("551c"),s("097d"),s("a026")),o=s("d1d4"),l=s("240f"),d=s("ef08"),c=s("c7a0"),u=s.n(c),p={name:"update-question",data:function(){return{question:{},title:"",question_input:"",answer:"",showhomepage:0,id:"",category_id:[],categoriesItems:[],question_type:[],question_typeItem:"",related:[],loaded:!1}},components:{VueTagsInput:u.a,Loading:l["default"],Relateds:d["default"]},created:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){var e,s,i,a,r,n,l,d,c,u,p,h=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o["a"].get("questions/question_get/".concat(this.$route.params.id));case 3:return e=t.sent,t.next=6,o["a"].get("questions/question_type");case 6:return s=t.sent,i=o["a"].get("questions"),a=e.data,t.next=11,o["a"].post("related",a.relateds.data);case 11:for(l in r=t.sent,this.question=a,this.id=a.id,this.title=a.title,this.question_input=a.question,n=a.category_id,n)this.categoriesItems.push({id:parseInt(n[l].id),title:n[l].title});for(c in this.question_typeItem=a.question_type,setTimeout(function(){h.$refs.editor.setContent(a.answer)},500),this.related=r.data.map(function(t){var e="categories"===t.type?"name":"title",s={selector:e,id:t.entity,type:{id:t.type,name:h.$t("related.type_".concat(t.type))}};return s}),d=s,d)this.question_type.push({id:c,title:d[c]});for(p in u=i.data,u)this.category_id.push({id:u[p].id,title:u[p].title});this.loaded=!0,t.next=33;break;case 28:t.prev=28,t.t0=t["catch"](0),console.log(t.t0),this.$store.dispatch("addToastMessage",{text:this.$t("errors.".concat(t.t0.data.status_code))}),this.$router.push({name:"categories"});case 33:case"end":return t.stop()}},t,this,[[0,28]])}));return function(){return t.apply(this,arguments)}}(),methods:{changeRelated:function(t){var e=t.old,s=t.changed,i=this.related.map(function(t){return t===e?s:t});this.related=i},deleteRelated:function(t){this.related=this.related.filter(function(e){return e!==t})},update:function(){var t=this;this.question_typeItem?this.$validator.validateAll().then(function(e){var s=t.related.filter(function(t){return!_.isEmpty(t.id)}).map(function(t){return{type:t.type.id,related_id:t.id.id}});if(e){var i={title:t.title,question:t.question_input,answer:t.$refs.editor.getContent(),home_show:t.showhomepage,category_id:t.categoriesItems,question_type:t.question_typeItem.id,related:s};o["a"].put("questions/".concat(t.id),i).then(function(e){t.$store.dispatch("addToastMessage",{text:n["default"].i18n.translate("question.updated"),type:"success"}),t.$router.push({name:"question",params:{id:e.data.id}})}).catch(function(e){t.$store.dispatch("addToastMessage",{text:n["default"].i18n.translate("errors.any"),error:e})})}}):this.$store.dispatch("addToastMessage",{text:n["default"].i18n.translate("errors.category")})}}},h=p,m=s("2877"),v=Object(m["a"])(h,i,a,!1,null,null,null);v.options.__file="update.vue";e["default"]=v.exports},ef08:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row row-reverse"},[s("div",{staticClass:"col-12 mb-3 mt-3 text-center"},[s("div",{staticClass:"btn btn-primary btn-with-icon btn-micro",on:{click:t.add}},[t._v("\n        "+t._s(t.$t("related.add"))+"\n      ")])]),t._l(t.relateds,function(e,i){return s("related",{key:i+3,attrs:{related:e},on:{del:t.del,change:t.changeRelated}})})],2)},a=[],r=s("0303"),n={name:"relateds",props:{relateds:{type:Array,required:!0}},components:{Related:r["default"]},methods:{add:function(){var t={id:{},selector:"name",type:{id:"categories",name:"Categories"}};this.relateds.push(t)},del:function(t){this.$emit("delRel",t)},changeRelated:function(t){var e=t.old,s=t.changed;this.$emit("changeRel",{old:e,changed:s})}}},o=n,l=s("2877"),d=Object(l["a"])(o,i,a,!1,null,null,null);d.options.__file="relateds.vue";e["default"]=d.exports}}]);
//# sourceMappingURL=chunk-5afd478d.d4aa79be.js.map