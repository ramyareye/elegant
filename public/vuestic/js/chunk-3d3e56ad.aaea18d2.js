(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3d3e56ad","chunk-6cf7b916","chunk-2d0a383c","chunk-6465b48c","chunk-2c9e12e0"],{"0303":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-6 mb-2"},[a("div",{staticClass:"row row-reverse"},[a("div",{staticClass:"col-4"},[a("multiselect",{attrs:{select:e.related.type,selects:e.types,rtl:!0,placeholder:e._f("translate")("related.type")},on:{select:e.selectType}})],1),a("div",{staticClass:"col-5"},[a("multiselect",{attrs:{rtl:!0,title:e.related.selector,apiUrl:e.apiUrl,select:e.related.id,selects:e.relations,placeholder:e._f("translate")("related.id")},on:{search:e.findRelations,select:e.selectRelated}})],1),a("div",{staticClass:"col-3 text-right"},[a("div",{staticClass:"btn btn-primary btn-with-icon btn-micro rounded-icon",on:{click:e.del}},[e._m(0)])])])])},s=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"btn-with-icon-content"},[a("i",{staticClass:"ion-md-close ion"})])}],n=a("2ef0"),r=a.n(n),l=a("02e0"),o={name:"related",data:function(){return{mounted:!1,apiUrl:"categories/search",types:[{id:"categories",name:this.$t("related.type_categories"),selector:"name"},{id:"blogs",name:this.$t("related.type_blogs"),selector:"title"},{id:"questions",name:this.$t("related.type_questions"),selector:"title"},{id:"videos",name:this.$t("related.type_videos"),selector:"title"}],relations:[]}},props:{related:{type:Object,required:!0}},components:{Multiselect:l["default"]},mounted:function(){r.a.isEmpty(this.related.id)||this.relations.push(this.related.id)},methods:{del:function(){this.$emit("del",this.related)},findRelations:function(e){this.relations=e},selectRelated:function(e){void 0!==e&&this.$emit("change",{old:this.related,changed:{id:e,type:this.related.type,selector:this.related.selector}})},selectType:function(e){this.mounted&&void 0!==e&&(this.mounted=!0,this.apiUrl="".concat(e.id,"/search"),this.$emit("change",{old:this.related,changed:{id:{},type:e,selector:e.selector}})),this.mounted=!0}}},c=o,d=a("2877"),u=Object(d["a"])(c,i,s,!1,null,null,null);u.options.__file="related.vue";t["default"]=u.exports},"04f7":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("transition",{attrs:{name:"modal"}},[a("div",{staticClass:"modal-mask"},[a("div",{staticClass:"modal-wrapper"},[a("div",{staticClass:"modal-container",class:e.wrapperClass},[a("div",{staticClass:"modal-header"},[e._t("header")],2),a("div",{staticClass:"modal-body"},[e._t("body")],2),a("div",{staticClass:"modal-footer"},[e._t("footer")],2)])])])])},s=[],n=(a("9c86"),{name:"modal",data:function(){return{modal:!1}},props:{big:{type:Boolean,default:!1}},mounted:function(){var e=this;document.addEventListener("keydown",function(t){27==t.keyCode&&e.$emit("onClose")})},computed:{wrapperClass:function(){return this.big?"big-modal":""}}}),r=n,l=(a("d93c"),a("2877")),o=Object(l["a"])(r,i,s,!1,null,null,null);o.options.__file="modal.vue";t["default"]=o.exports},"2ca8":function(e,t,a){"use strict";var i=a("e266"),s=a.n(i);s.a},"2da0":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.loaded?a("div",{staticClass:"form-elements"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("vuestic-widget",{attrs:{headerText:e._f("translate")("menu.videos.update")}},[a("div",{staticClass:"row row-reverse"},[a("div",{staticClass:"col-8"},[a("div",{staticClass:"row row-reverse"},[a("div",{staticClass:"col"},[a("div",{staticClass:"form-group with-icon-right",class:{"has-error":e.errors.has("title")}},[a("div",{staticClass:"input-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.title,expression:"title"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{id:"title",name:"title",required:""},domProps:{value:e.title},on:{input:function(t){t.target.composing||(e.title=t.target.value)}}}),a("i",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("title"),expression:"errors.has('title')"}],staticClass:"fa fa-exclamation-triangle icon-right input-icon"}),a("label",{staticClass:"control-label",attrs:{for:"title"}},[e._v(e._s(e._f("translate")("video.title")))]),a("i",{staticClass:"bar"}),a("small",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("title"),expression:"errors.has('title')"}],staticClass:"help text-danger"},[e._v(e._s(e.errors.first("title"))+"\n                    ")])])])]),a("div",{staticClass:"col"},[a("multiselect",{attrs:{select:e.category,selects:e.categories,apiUrl:"categories/search",rtl:!0},on:{search:e.findCategory,select:e.selectCategory}})],1)])]),a("div",{staticClass:"col-4"},[a("Uploader",{attrs:{maxFiles:1,apiUrl:e.apiUrl,images:e.getImage,placeholder:e._f("translate")("video.image")},on:{onChange:e.reInitImage}})],1)]),a("relateds",{attrs:{relateds:e.related},on:{delRel:e.deleteRelated,changeRel:e.changeRelated}}),a("div",{staticClass:"row"},[a("div",{staticClass:"col col text-center mt-4"},[a("button",{staticClass:"btn btn-success",on:{click:e.update}},[e._v("\n              "+e._s(e._f("translate")("buttons.update"))+"\n            ")])])])],1)],1)])]):a("loading")},s=[],n=(a("96cf"),a("cb0c")),r=(a("cadf"),a("551c"),a("097d"),a("d1d4")),l=a("240f"),o=a("a1fc"),c=a("ef08"),d=a("02e0"),u={name:"update-video",data:function(){return{video:{},id:0,title:"",excerpt:"",body:"",source:"",category:{},categories:[],related:[],loaded:!1,apiUrl:"videos/"+this.$route.params.id+"/upload"}},components:{Loading:l["default"],Uploader:o["default"],Relateds:c["default"],Multiselect:d["default"]},created:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t,a,i=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r["a"].get("videos/".concat(this.$route.params.id));case 3:return t=e.sent,e.next=6,r["a"].post("related",t.data.related.data);case 6:a=e.sent,this.video=t.data,this.id=t.data.id,this.title=t.data.title,this.excerpt=t.data.excerpt,this.body=t.data.body,this.source=t.data.source,this.category=t.data.category.data,this.related=a.data.map(function(e){var t="categories"===e.type?"name":"title",a={selector:t,id:e.entity,type:{id:e.type,name:i.$t("related.type_".concat(e.type))}};return a}),this.loaded=!0,e.next=22;break;case 18:e.prev=18,e.t0=e["catch"](0),this.$store.dispatch("addToastMessage",{text:this.$t("errors.".concat(e.t0.data.status_code))}),this.$router.push({name:"videos"});case 22:case"end":return e.stop()}},e,this,[[0,18]])}));return function(){return e.apply(this,arguments)}}(),methods:{findCategory:function(e){this.categories=e},selectCategory:function(e){this.category=e},getImage:function(){var e=this.video.image?[this.video.image.data]:[];return e},reInitImage:function(e){this.video=e.data},changeRelated:function(e){var t=e.old,a=e.changed,i=this.related.map(function(e){return e===t?a:e});this.related=i},deleteRelated:function(e){this.related=this.related.filter(function(t){return t!==e})},update:function(){var e=this;this.$validator.validateAll().then(function(t){var a=e.related.filter(function(e){return!_.isEmpty(e.id)}).map(function(e){return{type:e.type.id,related_id:e.id.id}});if(t){var i={title:e.title,category_id:e.category.id,related:a};r["a"].put("videos/".concat(e.id),i).then(function(t){e.$store.dispatch("addToastMessage",{text:e.$t("video.updated"),type:"success"}),e.$router.push({name:"video",params:{id:t.data.id}})}).catch(function(t){e.$store.dispatch("addToastMessage",{text:e.$t("errors.any"),error:t})})}})}}},p=u,f=a("2877"),h=Object(f["a"])(p,i,s,!1,null,null,null);h.options.__file="update.vue";t["default"]=h.exports},"84eb":function(e,t,a){},"9c86":function(e,t,a){"use strict";a("386b")("big",function(e){return function(){return e(this,"big","","")}})},a1fc:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("vue-dropzone",{ref:"dropzoneRef",attrs:{id:"dropzone",options:e.options,useCustomSlot:!!e.defaultImg}},[a("div",{staticClass:"dropzone-bg",style:e.bg,on:{mouseover:function(t){e.hoverSlot=!0},mouseleave:function(t){e.hoverSlot=!1}}},[a("transition",{attrs:{name:"fade"}},[a("i",{directives:[{name:"show",rawName:"v-show",value:e.hoverSlot,expression:"hoverSlot"}],staticClass:"glyphicon glyphicon-pencil"})])],1)]),e.file?a("modal",{on:{onClose:function(t){e.file=!1}}},[e.onlyImg?e._e():a("template",{slot:"header"},[a("div",{staticClass:"col text-center"},[e._v("\n        "+e._s(e.file.name)+"\n      ")])]),a("template",{slot:"body"},[a("div",{staticClass:"modal-body text-center"},[a("img",{attrs:{src:e.file.url.medium}}),e._l(e.file.url,function(t,i){return e.onlyImg?e._e():a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-3"},[e._v("\n            "+e._s(e._f("translate")("uploader."+i))+" :\n          ")]),a("div",{staticClass:"col-md-9 text-center"},[a("a",{staticClass:"btn btn-info btn-micro",attrs:{target:"_blank",href:t},domProps:{innerHTML:e._s(e.$t("uploader.open"))}}),a("button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:"file.url."+i,expression:"`file.url.${index}`",arg:"copy"}],staticClass:"btn btn-primary btn-micro",staticStyle:{"margin-right":"10px"},domProps:{innerHTML:e._s(e.$t("uploader.copy"))}})])])})],2)]),a("template",{slot:"footer"},[a("button",{staticClass:"btn btn-info btn-micro",domProps:{innerHTML:e._s(e.$t("uploader.close"))},on:{click:function(t){e.file=!1}}}),e.allowDelete?a("button",{staticClass:"btn btn-danger btn-micro",domProps:{innerHTML:e._s(e.$t("uploader.delete"))},on:{click:e.deleteFile}}):e._e()])],2):e._e()],1)},s=[],n=(a("7f7f"),a("f386"),a("c5f6"),a("04f7")),r=a("d1d4"),l=a("92c3"),o=a.n(l),c=(a("1e3f"),{name:"uploader",data:function(){return{file:!1,options:{},loading:!1,deleting:!1,hoverSlot:!1}},props:{hasSlot:{type:Boolean,defalut:!1},apiUrl:{type:String,required:!0},deleteApiUrl:{type:String,default:""},images:{type:Function,required:!0},maxFiles:{type:Number,default:100},allowDelete:{type:Boolean,default:!0},onlyImg:{type:Boolean,default:!1},placeholder:String,defaultImg:String},components:{Modal:n["default"],vueDropzone:o.a},created:function(){var e=this,t=this.$store.getters.token;this.options={timeout:5e3,maxFilesize:4,uploadMultiple:!1,maxFiles:this.maxFiles,acceptedFiles:".jpeg,.jpg,.png,.gif",url:"api/".concat(this.apiUrl),headers:{Authorization:"Bearer ".concat(t)},dictFileTooBig:this.$i18n.translate("file.big"),dictDefaultMessage:this.placeholder||this.$i18n.translate("file.upload"),renameFile:function(t){return e.renameFile(t)},success:function(t,a){return e.onSuccess(t,a)},error:function(t,a,i){return e.onError(t,a,i)}}},mounted:function(){this.init()},beforeDestroy:function(){this.$refs.dropzoneRef.destroy()},computed:{bg:function(){var e=this.defaultImg;return"background-image: url('".concat(e,"')")}},methods:{init:function(){var e=this,t=this.images();t.map(function(t){return e.$refs.dropzoneRef.manuallyAddFile(t,t.url.small)}),this.addOnClick()},reInit:function(e){this.$emit("onChange",e),this.$refs.dropzoneRef.removeAllFiles(),this.init()},addOnClick:function(){var e=this;this.$refs.dropzoneRef.dropzone.files.map(function(t){t.previewElement.addEventListener("click",function(){e.file=t})})},renameFile:function(e){var t=new Date,a=t.getTime();return a+"-"+e.name},onSuccess:function(e,t){this.reInit(t)},onError:function(e,t,a){this.$refs.dropzoneRef.removeFile(e),this.$store.dispatch("addToastMessage",{text:t})},deleteFile:function(){if(this.allowDelete&&!this.deleting){var e=this,t=this.file;this.$swal({type:"warning",showCancelButton:!0,cancelButtonColor:"#d33",confirmButtonColor:"#3085d6",title:e.$i18n.translate("alert.sure"),text:e.$i18n.translate("alert.sure_text"),cancelButtonText:e.$i18n.translate("alert.cancel"),confirmButtonText:e.$i18n.translate("alert.confirm")}).then(function(a){a.value&&(e.deleting=!0,r["a"].post(e.deleteApiUrl?e.deleteApiUrl:"".concat(e.apiUrl,"/").concat(t.id)).then(function(t){e.reInit(t),e.$swal({type:"success",title:e.$i18n.translate("uploader.deleted"),text:e.$i18n.translate("uploader.deleted_text"),confirmButtonText:e.$i18n.translate("alert.confirm")})}).finally(function(){e.file=!1,e.deleting=!1}))})}}}}),d=c,u=(a("2ca8"),a("2877")),p=Object(u["a"])(d,i,s,!1,null,null,null);p.options.__file="uploader.vue";t["default"]=p.exports},d93c:function(e,t,a){"use strict";var i=a("84eb"),s=a.n(i);s.a},e266:function(e,t,a){},ef08:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row row-reverse"},[a("div",{staticClass:"col-12 mb-3 mt-3 text-center"},[a("div",{staticClass:"btn btn-primary btn-with-icon btn-micro",on:{click:e.add}},[e._v("\n        "+e._s(e.$t("related.add"))+"\n      ")])]),e._l(e.relateds,function(t,i){return a("related",{key:i+3,attrs:{related:t},on:{del:e.del,change:e.changeRelated}})})],2)},s=[],n=a("0303"),r={name:"relateds",props:{relateds:{type:Array,required:!0}},components:{Related:n["default"]},methods:{add:function(){var e={id:{},selector:"name",type:{id:"categories",name:"Categories"}};this.relateds.push(e)},del:function(e){this.$emit("delRel",e)},changeRelated:function(e){var t=e.old,a=e.changed;this.$emit("changeRel",{old:t,changed:a})}}},l=r,o=a("2877"),c=Object(o["a"])(l,i,s,!1,null,null,null);c.options.__file="relateds.vue";t["default"]=c.exports}}]);
//# sourceMappingURL=chunk-3d3e56ad.aaea18d2.js.map